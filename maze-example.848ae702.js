!function(){var t={};Object.defineProperty(t,"__esModule",{value:!0});var e=(r=void 0,t.create=r);t.equal=e;var r=function(t){return{x:t.x,y:t.y}};t.create=r;e=function(t,e){var r=t.x,n=t.y,i=e.x,o=e.y;return r===i&&n===o},t.equal=e;var n={};Object.defineProperty(n,"__esModule",{value:!0});var i,o=(h=void 0,p=n.Type=h,f=n.create=p,d=n.set=f,y=n.isWall=d,b=n.isEastWall=y,v=n.isSouthWall=b,n.areSamePlace=v);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.getPosition=o;var a,h=i;n.Type=h,(a=i||(h=i={},n.Type=h)).WALL="WALL",a.ROAD="ROAD";var l=i.WALL,p=function(t){var e=t.position;return{type:l,eastType:l,southType:l,position:e}};n.create=p;var f=function(t,e,r){return e in t&&r in i?u({},t,c({},e,r)):u({},t)};n.set=f;var d=function(t){var e=t.type;return l===e};n.isWall=d;var y=function(t){var e=t.eastType;return l===e};n.isEastWall=y;var b=function(t){var e=t.southType;return l===e};n.isSouthWall=b;var v=function(t,r){return e(t.position,r.position)};n.areSamePlace=v;o=function(t){return t.position},n.getPosition=o;var w={};Object.defineProperty(w,"__esModule",{value:!0});var m=(E=void 0,P=w.create=E,T=w.getAllCells=P,A=w.getAllWalls=T,C=w.pickRamdom=A,N=w.pave=C,w.set=N);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}w.getNears=m;var E=function(t){for(var e=t.size,n=e.x,i=e.y,o={size:e},s=0;s<n;++s)for(var u=o[s]={},c=0;c<i;++c)u[c]=p({position:r({x:s,y:c})});return o};w.create=E;var j=function(t){for(var e=t.size,r=e.x,n=e.y,i=[],o=0;o<r;++o)for(var s=t[o],u=0;u<n;++u)i.push(s[u]);return i},P=j;w.getAllCells=P;var T=function(t){return j(t).filter(d)};w.getAllWalls=T;var A=function(t){var e=t.length,r=S(t);if(!e)return[void 0,[]];var n=Math.floor(Math.random()*e);return[O(r.splice(n,1),1)[0],r]};w.pickRamdom=A;var V=h.ROAD,C=function(t,e,r){var n=O(z(e,r),2),i=n[0],o=n[1],s=t,u=e,c=r;return i?(u=k(s,u,i,V),s=D(s,u)):o&&(c=k(s,c,o,V),s=D(s,c)),c=k(s,c,"type",V),[s=D(s,c),c]};w.pave=C;var k=function(t,e,r,n){var i=I(t,e);return f(i,r,n)},D=function(t,e){var r=o(e),n=r.x,i=r.y;return _({},t,x({},n,_({},t[n],x({},i,e))))},N=D;w.set=N;var I=function(t,e){var r=o(e),n=r.x,i=r.y;return _({},t[n][i])},z=function(t,e){var r=o(t),n=r.x,i=r.y,s=o(e),u=s.x,c=s.y;return n<u?["eastType",null]:i<c?["southType",null]:n>u?[null,"eastType"]:i>c?[null,"southType"]:[null,null]};m=function(t,e){for(var r=t.size,n=r.x,i=r.y,s=o(e),u=s.x,c=s.y,a=[],h=0,l=[[-1,0],[0,-1],[1,0],[0,1]];h<l.length;h++){var p=O(l[h],2),f=u+p[0],d=c+p[1];0<=f&&0<=d&&f<n&&d<i&&a.push(t[f][d])}return a},w.getNears=m;var W={};Object.defineProperty(W,"__esModule",{value:!0});var M=void 0;W.render=M;M=function(t,e){return function(r){for(var n=r.size,i=2*n.x+1,s=2*n.y+1,u=t.createImageData(i*e,s*e),c=u.data,a=u.data.length,h=0;h<a;++h)c[h]=3==h%4?H:0;var l=!0,p=!1,f=void 0;try{for(var v,w=P(r)[Symbol.iterator]();!(l=(v=w.next()).done);l=!0){var m=v.value,g=o(m),_=g.x,x=g.y,O=2*_+1,S=2*x+1;d(m)||R(c,U,O,S,e,i),y(m)||R(c,U,O+1,S,e,i),b(m)||R(c,U,O,S+1,e,i)}}catch(t){p=!0,f=t}finally{try{l||null==w.return||w.return()}finally{if(p)throw f}}t.putImageData(u,0,0)}},W.render=M;var R=function(t,e,r,n,i,o){for(var s=n*i,u=r*i,c=i*o,a=0;a<i;++a)for(var h=(s+a)*c,l=0;l<i;++l)for(var p=4*(h+u+l),f=0;f<4;++f)t[p+f]=e[f]},H=255,U=[H,H,H,H],Y=function(t,e){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function L(t,e){function r(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function q(t){return"function"==typeof t}var B=!1,$={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;B=t},get useDeprecatedSynchronousErrorHandling(){return B}};function F(t){setTimeout((function(){throw t}),0)}var G={closed:!0,next:function(t){},error:function(t){if($.useDeprecatedSynchronousErrorHandling)throw t;F(t)},complete:function(){}},J=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function K(t){return null!==t&&"object"==typeof t}var Q=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),X=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this._parentOrParents,n=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var o=0;o<r.length;++o){r[o].remove(this)}if(q(n))try{n.call(this)}catch(t){e=t instanceof Q?Z(t.errors):[t]}if(J(i)){o=-1;for(var s=i.length;++o<s;){var u=i[o];if(K(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof Q?e=e.concat(Z(t.errors)):e.push(t)}}}if(e)throw new Q(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function Z(t){return t.reduce((function(t,e){return t.concat(e instanceof Q?e.errors:e)}),[])}var tt=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),et=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=G;break;case 1:if(!r){o.destination=G;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new rt(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new rt(o,r,n,i)}return o}return L(e,t),e.prototype[tt]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(X),rt=function(t){function e(e,r,n,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return q(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==G&&(q((u=Object.create(r)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=n,s._complete=i,s}return L(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;$.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=$.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):F(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;F(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};$.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),$.useDeprecatedSynchronousErrorHandling)throw t;F(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!$.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return $.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(F(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(et);function nt(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof et?n:null}return!0}var it=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function ot(){}function st(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:ot}var ut=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof et)return t;if(t[tt])return t[tt]()}return t||e||r?new et(t,e,r):new et(G)}(t,e,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||$.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),$.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){$.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),nt(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=ct(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[it]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:st(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ct(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function ct(t){if(t||(t=$.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var at=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),ht=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return L(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(X),lt=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return L(e,t),e}(et),pt=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return L(e,t),e.prototype[tt]=function(){return new lt(this)},e.prototype.lift=function(t){var e=new ft(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new at;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new at;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new at;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new at;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new at;return this.hasError?(t.error(this.thrownError),X.EMPTY):this.isStopped?(t.complete(),X.EMPTY):(this.observers.push(t),new ht(this,t))},e.prototype.asObservable=function(){var t=new ut;return t.source=this,t},e.create=function(t,e){return new ft(t,e)},e}(ut),ft=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return L(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):X.EMPTY},e}(pt);var dt=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return L(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new at;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(pt),yt=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return L(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return L(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(X)),bt=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),vt=function(t){function e(r,n){void 0===n&&(n=bt.now);var i=t.call(this,r,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return L(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(bt),wt=new ut((function(t){return t.complete()}));function mt(t){return t?function(t){return new ut((function(e){return t.schedule((function(){return e.complete()}))}))}(t):wt}function gt(t){return t&&"function"==typeof t.schedule}var _t,xt=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function Ot(t,e){return new ut((function(r){var n=new X,i=0;return n.add(e.schedule((function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function St(t,e){return e?Ot(t,e):new ut(xt(t))}function Et(t){var e=t.error;t.subscriber.error(e)}_t||(_t={});var jt=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return gt(r)?(t.pop(),Ot(t,r)):St(t)}(this.value);case"E":return t=this.error,new ut(e?function(r){return e.schedule(Et,0,{error:t,subscriber:r})}:function(e){return e.error(t)});case"C":return mt()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();new vt(yt),function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}t.prototype=Object.create(Error.prototype)}();function Pt(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Tt(t,e))}}var Tt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.project,this.thisArg))},t}(),At=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return L(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(et);var Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(et),Ct=function(t){function e(e,r,n){var i=t.call(this)||this;return i.parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return L(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(et);function kt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Dt=kt(),Nt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function It(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var zt=function(t){if(t&&"function"==typeof t[it])return n=t,function(t){var e=n[it]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Nt(t))return xt(t);if(It(t))return r=t,function(t){return r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,F),t};if(t&&"function"==typeof t[Dt])return e=t,function(t){for(var r=e[Dt]();;){var n=r.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t};var e,r,n,i=K(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Wt(t,e,r,n,i){if(void 0===i&&(i=new Ct(t,r,n)),!i.closed)return e instanceof ut?e.subscribe(i):zt(e)(i)}new ut(ot);var Mt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Rt(t,this.predicate,this.thisArg))},t}(),Rt=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return L(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(et);function Ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),St(t,void 0).lift(new Ut(r))}var Ut=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.resultSelector))},t}(),Yt=function(t){function e(e,r,n){void 0===n&&(n=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return L(e,t),e.prototype._next=function(t){var e=this.iterators;J(t)?e.push(new qt(t)):"function"==typeof t[Dt]?e.push(new Lt(t[Dt]())):e.push(new Bt(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<e;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(i=!0),u.done)return void r.complete();o.push(u.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(et),Lt=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),qt=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Dt]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Bt=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return L(e,t),e.prototype[Dt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Wt(this,this.observable,this,e)},e}(Vt),$t=(function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?Ft:$t}t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}(),function(t){function e(e,r){var n=t.call(this,e)||this;return n.bufferSize=r,n.buffer=[],n}return L(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(et)),Ft=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.bufferSize=r,i.startBufferEvery=n,i.buffers=[],i.count=0,i}return L(e,t),e.prototype._next=function(t){var e=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var s=n[o];s.push(t),s.length===e&&(n.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,r=this.destination;e.length>0;){var n=e.shift();n.length>0&&r.next(n)}t.prototype._complete.call(this)},e}(et);(function(t){function e(e,r){var n=t.call(this,e)||this;return n.errorFactory=r,n.hasValue=!1,n}L(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}})(et),function(){function t(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}t.prototype.call=function(t,e){return e.subscribe(new Gt(t,this.predicate,this.thisArg,this.source))}}();var Gt=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.predicate=r,o.thisArg=n,o.source=i,o.index=0,o.thisArg=n||o,o}return L(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(et);!function(){function t(t,e,r){this.project=t,this.concurrent=e,this.scheduler=r}t.prototype.call=function(t,e){return e.subscribe(new Jt(t,this.project,this.concurrent,this.scheduler))}}();var Jt=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.project=r,o.concurrent=n,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return L(e,t),e.dispatch=function(t){var e=t.subscriber,r=t.result,n=t.value,i=t.index;e.subscribeToProjection(r,n,i)},e.prototype._next=function(t){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(t);try{var i=(0,this.project)(t,n);if(this.scheduler){var o={subscriber:this,result:i,value:t,index:n};this.destination.add(this.scheduler.schedule(e.dispatch,0,o))}else this.subscribeToProjection(i,t,n)}catch(t){r.error(t)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,r){this.active++,this.destination.add(Wt(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,r,n,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(Vt),Kt=(function(){function t(){}t.prototype.call=function(t,e){return e.subscribe(new Kt(t))}}(),function(t){function e(e){return t.call(this,e)||this}return L(e,t),e.prototype._next=function(t){this.destination.next(jt.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(jt.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(jt.createComplete()),t.complete()},e}(et)),Qt=(function(){function t(t,e,r){this.accumulator=t,this.seed=e,this.concurrent=r}t.prototype.call=function(t,e){return e.subscribe(new Qt(t,this.accumulator,this.seed,this.concurrent))}}(),function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.accumulator=r,o.acc=n,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return L(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,r=this.destination,n=void 0;try{n=(0,this.accumulator)(this.acc,t,e)}catch(t){return r.error(t)}this.active++,this._innerSub(n,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,r){var n=new Ct(this,e,r),i=this.destination;i.add(n);var o=Wt(this,t,void 0,void 0,n);o!==n&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,r,n,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(Vt)),Xt=(function(){function t(t,e){this.count=t,this.source=e}t.prototype.call=function(t,e){return e.subscribe(new Xt(t,this.count,this.source))}}(),function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.count=r,i.source=n,i}return L(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return t.prototype.error.call(this,e);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},e}(et)),Zt=(function(){function t(t){this.notifier=t}t.prototype.call=function(t,e){var r=new Zt(t),n=e.subscribe(r);return n.add(Wt(r,this.notifier)),n}}(),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return L(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(Vt));!function(){function t(t){this.predicate=t}t.prototype.call=function(t,e){return e.subscribe(new te(t,this.predicate))}}();var te=function(t){function e(e,r){var n=t.call(this,e)||this;return n.predicate=r,n.skipping=!0,n.index=0,n}return L(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(et);!function(){function t(t){this.notifier=t}t.prototype.call=function(t,e){var r=new ee(t),n=Wt(r,this.notifier);return n&&!r.seenValue?(r.add(n),e.subscribe(r)):r}}();var ee=function(t){function e(e){var r=t.call(this,e)||this;return r.seenValue=!1,r}return L(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Vt),re=(function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}t.prototype.call=function(t,e){return e.subscribe(new re(t,this.nextOrObserver,this.error,this.complete))}}(),function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o._tapNext=ot,o._tapError=ot,o._tapComplete=ot,o._tapError=n||ot,o._tapComplete=i||ot,q(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||ot,o._tapError=r.error||ot,o._tapComplete=r.complete||ot),o}return L(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(et)),ne=(function(){function t(t,e,r){this.durationSelector=t,this.leading=e,this.trailing=r}t.prototype.call=function(t,e){return e.subscribe(new ne(t,this.durationSelector,this.leading,this.trailing))}}(),function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=r,o._leading=n,o._trailing=i,o._hasValue=!1,o}return L(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Wt(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,r,n,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(Vt));!function(t){function e(e,r,n,i,o){var s=t.call(this,e)||this;return s.duration=r,s.scheduler=n,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}L(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(ie,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}(et);function ie(t){t.subscriber.clearThrottle()}!function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}t.prototype.call=function(t,e){return e.subscribe(new oe(t,this.windowSize,this.startWindowEvery))}}();var oe=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=r,i.startWindowEvery=n,i.windows=[new pt],i.count=0,e.next(i.windows[0]),i}return L(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var u=this.count-n+1;if(u>=0&&u%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var c=new pt;i.push(c),r.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(et);!function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.openings=r,i.closingSelector=n,i.contexts=[],i.add(i.openSubscription=Wt(i,r,r)),i}L(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var r=e.length,n=0;n<r;n++)e[n].window.next(t)},e.prototype._error=function(e){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var o=r[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,n=-1;++n<r;){var i=e[n];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,r,n,i){if(t===this.openings){var o=void 0;try{o=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var s=new pt,u=new X,c={window:s,subscription:u};this.contexts.push(c);var a=Wt(this,o,c);a.closed?this.closeWindow(this.contexts.length-1):(a.context=c,u.add(a)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,r=e[t],n=r.window,i=r.subscription;e.splice(t,1),n.complete(),i.unsubscribe()}}}(Vt);var se={};Object.defineProperty(se,"__esModule",{value:!0});var ue=(he=void 0,se.getCellToPave=he);function ce(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}se.pave=ue;var he=function(t){for(var e,r,n=t.waysToPave,i=t.map,o=n;;){var s=ae(A(o),2);if(e=s[0],o=s[1],!e)return;if(r=ae(A(m(i,e).filter(d)),1)[0]){o=[].concat(ce(o),[e]);break}}return{map:i,from:e,to:r,waysToPave:o}};se.getCellToPave=he;ue=function(t){var e=t.map,r=t.from,n=t.to,i=ae(C(e,r,n),2);return{map:i[0],to:i[1]}},se.pave=ue;var le={};Object.defineProperty(le,"__esModule",{value:!0});var pe=void 0;function fe(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ye(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}le.makeMap=pe;var ve=function(t){var e=be(t,2),r=e[0],n=e[1];return he({map:r,waysToPave:n})},we=function(t){var e=t.map,r=t.from,n=t.to,i=t.waysToPave;return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){ye(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},ue({map:e,from:r,to:n}),{waysToPave:i})};function me(t,e,r,n,i,o,s){try{var u=t[o](s),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,i)}pe=function(t){var e=t.size,r=E({size:e}),n=be(A(T(r)),1)[0];if(!n)throw new Error("failed to pick start cell.");n=f(n,"type",h.ROAD),r=N(r,n);var i,o,s=[n],u=new dt(r),c=new dt(s),a=new dt(1),l=Ht(u,c).pipe(Pt(ve),(i=function(t){return!!t},function(t){return t.lift(new Mt(i,o))})),p=Ht(l.pipe(Pt(we)),a).pipe(Pt((function(t){return be(t,1)[0]})),Pt((function(t){var e=t.map,r=t.to,n=t.waysToPave;u.next(e),c.next([].concat(fe(n),[r]))}))).subscribe();return{map$:u.pipe(Pt((function(t){return t}))),wayToPave$:l,paving$:p,pushNext:function(){a.next(1)}}},le.makeMap=pe;var ge=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e,r,n,i,o,s,u,c,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=100,r=100,n=2,i=document.querySelector("canvas")){t.next=6;break}throw new Error("failed to find canvas");case 6:if(i.width=n*(2*e+1),i.height=n*(2*r+1),o=i.getContext("2d")){t.next=11;break}throw new Error("failed to get context");case 11:s=pe({size:{x:e,y:r}}),u=s.map$,c=s.pushNext,u.subscribe(M(o,n)),a=1;case 14:return t.next=17,_e(a);case 17:a=Math.max(.01,.9*a),c(),t.next=14;break;case 21:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){me(o,n,i,s,u,"next",t)}function u(t){me(o,n,i,s,u,"throw",t)}s(void 0)}))});return function(){return e.apply(this,arguments)}}(),_e=function(t){return new Promise((function(e){return setTimeout(e,1e3*t)}))};ge().catch(console.error.bind(console))}();