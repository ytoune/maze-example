!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=3)}([function(t,r,e){t.exports=e.p+"index.html"},function(t,r,e){},,function(t,r,e){"use strict";e.r(r);e(0),e(1);const n=({x:t,y:r})=>({x:t,y:r}),o="WALL",i={WALL:o,ROAD:"ROAD"},s=({position:t})=>({type:o,eastType:o,southType:o,position:t}),u=(t,r,e)=>r in t&&i[e]?{...t,[r]:e}:{...t},c=({type:t})=>o===t,a=({eastType:t})=>o===t,h=({southType:t})=>o===t,p=({position:t})=>t,l=t=>{const{size:{x:r,y:e}}=t,n=[];for(let o=0;o<r;++o){const r=t[o];for(let t=0;t<e;++t)n.push(r[t])}return n},f=t=>{const{length:r}=t;if(!r)return[];const e=Math.floor(Math.random()*r),n=[...t],[o]=n.splice(e,1);return[o,n]},{ROAD:b}=i,y=(t,r,e,n)=>{const o=v(t,r);return u(o,e,n)},d=(t,r)=>{const{x:e,y:n}=p(r);return{...t,[e]:{...t[e],[n]:r}}},v=(t,r)=>{const{x:e,y:n}=p(r);return{...t[e][n]}},_=(t,r)=>{const{x:e,y:n}=p(t),{x:o,y:i}=p(r);return e<o?["eastType",null]:n<i?["southType",null]:e>o?[null,"eastType"]:n>i?[null,"southType"]:[null,null]},w=(t,r)=>{const{size:{x:e,y:n}}=t,{x:o,y:i}=p(r),s=[];for(const[r,u]of[[-1,0],[0,-1],[1,0],[0,1]]){const c=o+r,a=i+u;0<=c&&0<=a&&c<e&&a<n&&s.push(t[c][a])}return s},m=(t,r)=>t=>{const e=canvas.getContext("2d"),{size:{x:n,y:o}}=t,i=2*n+1,s=2*o+1,u=e.createImageData(i*r,s*r),{data:f,data:{length:b}}=u;for(let t=0;t<b;++t)f[t]=3==t%4?g:0;for(const e of l(t)){const{x:t,y:n}=p(e),o=2*t+1,s=2*n+1;c(e)||x(f,S,o,s,r,i),a(e)||x(f,S,o+1,s,r,i),h(e)||x(f,S,o,s+1,r,i)}e.putImageData(u,0,0)},x=(t,r,e,n,o,i)=>{const s=n*o,u=e*o,c=o*i;for(let e=0;e<o;++e){const n=(s+e)*c;for(let e=0;e<o;++e){const o=4*(n+u+e);for(let e=0;e<4;++e)t[o+e]=r[e]}}},g=255,S=[g,g,g,g];
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var E=function(t,r){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function T(t,r){function e(){this.constructor=t}E(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function O(t){return"function"==typeof t}var P=!1,j={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;P=t},get useDeprecatedSynchronousErrorHandling(){return P}};function A(t){setTimeout(function(){throw t})}var D={closed:!0,next:function(t){},error:function(t){if(j.useDeprecatedSynchronousErrorHandling)throw t;A(t)},complete:function(){}},M=Array.isArray||function(t){return t&&"number"==typeof t.length};function V(t){return null!=t&&"object"==typeof t}var C,H={e:{}};function k(){try{return C.apply(this,arguments)}catch(t){return H.e=t,H}}function z(t){return C=t,k}function I(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,r){return r+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}I.prototype=Object.create(Error.prototype);var R=I,U=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,r=!1;if(!this.closed){var e=this._parent,n=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=n?n.length:0;e;)e.remove(this),e=++s<u&&n[s]||null;if(O(o))z(o).call(this)===H&&(r=!0,t=t||(H.e instanceof R?Y(H.e.errors):[H.e]));if(M(i))for(s=-1,u=i.length;++s<u;){var c=i[s];if(V(c))if(z(c.unsubscribe).call(c)===H){r=!0,t=t||[];var a=H.e;a instanceof R?t=t.concat(Y(a.errors)):t.push(a)}}if(r)throw new R(t)}},t.prototype.add=function(r){if(!r||r===t.EMPTY)return t.EMPTY;if(r===this)return this;var e=r;switch(typeof r){case"function":e=new t(r);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.prototype._addParent=function(t){var r=this._parent,e=this._parents;r&&r!==t?e?-1===e.indexOf(t)&&e.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Y(t){return t.reduce(function(t,r){return t.concat(r instanceof R?r.errors:r)},[])}var N="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),L=function(t){function r(e,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=D;break;case 1:if(!e){i.destination=D;break}if("object"==typeof e){e instanceof r?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new $(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new $(i,e,n,o)}return i}return T(r,t),r.prototype[N]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parent,r=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=r,this._parentSubscription=null,this},r}(U),$=function(t){function r(r,e,n,o){var i,s=t.call(this)||this;s._parentSubscriber=r;var u=s;return O(e)?i=e:e&&(i=e.next,n=e.error,o=e.complete,e!==D&&(O((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=n,s._complete=o,s}return T(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;j.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=j.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):A(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;A(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};j.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),j.useDeprecatedSynchronousErrorHandling)throw t;A(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!j.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return j.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(A(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(L);var W="function"==typeof Symbol&&Symbol.observable||"@@observable";function q(){}function B(t){return t?1===t.length?t[0]:function(r){return t.reduce(function(t,r){return r(t)},r)}:q}var F=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof L)return t;if(t[N])return t[N]()}return t||r||e?new L(t,r,e):new L(D)}(t,r,e);if(n?n.call(o,this.source):o.add(this.source||j.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),j.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){j.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof L?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=G(r))(function(r,n){var o;o=e.subscribe(function(r){try{t(r)}catch(t){n(t),o&&o.unsubscribe()}},n,r)})},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[W]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:B(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=G(t))(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})},t.create=function(r){return new t(r)},t}();function G(t){if(t||(t=j.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function J(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}J.prototype=Object.create(Error.prototype);var K=J,Q=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return T(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(U),X=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return T(r,t),r}(L),Z=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return T(r,t),r.prototype[N]=function(){return new X(this)},r.prototype.lift=function(t){var r=new tt(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new K;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new K;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new K;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new K;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new K;return this.hasError?(t.error(this.thrownError),U.EMPTY):this.isStopped?(t.complete(),U.EMPTY):(this.observers.push(t),new Q(this,t))},r.prototype.asObservable=function(){var t=new F;return t.source=this,t},r.create=function(t,r){return new tt(t,r)},r}(F),tt=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return T(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):U.EMPTY},r}(Z),rt=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return T(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new K;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(Z),et=function(t){return function(r){for(var e=0,n=t.length;e<n&&!r.closed;e++)r.next(t[e]);r.closed||r.complete()}};var nt=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return T(r,t),r.prototype.notifyNext=function(t,r,e,n,o){this.destination.next(r)},r.prototype.notifyError=function(t,r){this.destination.error(t)},r.prototype.notifyComplete=function(t){this.destination.complete()},r}(L),ot=function(t){function r(r,e,n){var o=t.call(this)||this;return o.parent=r,o.outerValue=e,o.outerIndex=n,o.index=0,o}return T(r,t),r.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},r.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(L);var it=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();var st=function(t){if(t instanceof F)return function(r){return t._isScalar?(r.next(t.value),void r.complete()):t.subscribe(r)};if(t&&"function"==typeof t[W])return function(t){return function(r){var e=t[W]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(r)}}(t);if(function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}(t))return et(t);if(function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}(t))return function(t){return function(r){return t.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,A),r}}(t);if(t&&"function"==typeof t[it])return function(t){return function(r){for(var e=t[it]();;){var n=e.next();if(n.done){r.complete();break}if(r.next(n.value),r.closed)break}return"function"==typeof e.return&&r.add(function(){e.return&&e.return()}),r}}(t);var r=V(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ut(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=t[t.length-1];return"function"==typeof e&&t.pop(),function(t,r){return new F(r?function(e){var n=new U,o=0;return n.add(r.schedule(function(){o!==t.length?(e.next(t[o++]),e.closed||n.add(this.schedule())):e.complete()})),n}:et(t))}(t,void 0).lift(new ct(e))}var ct=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,r){return r.subscribe(new at(t,this.resultSelector))},t}(),at=function(t){function r(r,e,n){void 0===n&&(n=Object.create(null));var o=t.call(this,r)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof e?e:null,o.values=n,o}return T(r,t),r.prototype._next=function(t){var r=this.iterators;M(t)?r.push(new pt(t)):"function"==typeof t[it]?r.push(new ht(t[it]())):r.push(new lt(this.destination,this,t))},r.prototype._complete=function(){var t=this.iterators,r=t.length;if(this.unsubscribe(),0!==r){this.active=r;for(var e=0;e<r;e++){var n=t[e];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,e));else this.active--}}else this.destination.complete()},r.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},r.prototype.checkIterators=function(){for(var t=this.iterators,r=t.length,e=this.destination,n=0;n<r;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var o=!1,i=[];for(n=0;n<r;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(o=!0),u.done)return void e.complete();i.push(u.value)}this.resultSelector?this._tryresultSelector(i):e.next(i),o&&e.complete()},r.prototype._tryresultSelector=function(t){var r;try{r=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(r)},r}(L),ht=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),pt=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[it]=function(){return this},t.prototype.next=function(t){var r=this.index++,e=this.array;return r<this.length?{value:e[r],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),lt=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.parent=e,o.observable=n,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return T(r,t),r.prototype[it]=function(){return this},r.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},r.prototype.hasValue=function(){return this.buffer.length>0},r.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},r.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},r.prototype.notifyNext=function(t,r,e,n,o){this.buffer.push(r),this.parent.checkIterators()},r.prototype.subscribe=function(t,r){return function(t,r,e,n,o){if(void 0===o&&(o=new ot(t,e,n)),!o.closed)return st(r)(o)}(this,this.observable,this,r)},r}(nt);function ft(t,r){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new bt(t,r))}}var bt=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new yt(t,this.project,this.thisArg))},t}(),yt=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.project=e,o.count=0,o.thisArg=n||o,o}return T(r,t),r.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},r}(L);var dt=function(){function t(t,r){this.predicate=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new vt(t,this.predicate,this.thisArg))},t}(),vt=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.predicate=e,o.thisArg=n,o.count=0,o}return T(r,t),r.prototype._next=function(t){var r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}r&&this.destination.next(t)},r}(L);const _t=({map:t,from:r,to:e})=>{const[n,o]=((t,r,e)=>{const{x:n,y:o}=p(r),{x:i,y:s}=p(e),[u,c]=_(r,e);let a=t,h=r,l=e;return u?(h=y(a,h,u,b),a=d(a,h)):(l=y(a,l,c,b),a=d(a,l)),l=y(a,l,"type",b),[a=d(a,l),l]})(t,r,e);return{map:n,to:o}},wt=([t,r])=>(({waysToPave:t,map:r})=>{let e,n,o=t;for(;;){if([e,o]=f(o),!e)return;if([n]=f(w(r,e).filter(c)),n){o=[...o,e];break}}return{map:r,from:e,to:n,waysToPave:o}})({map:t,waysToPave:r}),mt=({map:t,from:r,to:e,waysToPave:n})=>({..._t({map:t,from:r,to:e}),waysToPave:n}),xt=({size:t})=>{let r=(({size:t})=>{const{x:r,y:e}=t,o={size:t};for(let t=0;t<r;++t){const r=o[t]={};for(let o=0;o<e;++o)r[o]=s({position:n({x:t,y:o})})}return o})({size:t}),[e]=f((t=>l(t).filter(c))(r));e=u(e,"type",i.ROAD),r=d(r,e);const o=[e],a=new rt(r),h=new rt(o);const p=new rt(1),b=ut(a,h).pipe(ft(wt),function(t,r){return function(e){return e.lift(new dt(t,r))}}(t=>t));ut(b.pipe(ft(mt)),p).pipe(ft(([t])=>t),ft(({map:t,to:r,waysToPave:e})=>{a.next(t),h.next([...e,r])})).subscribe();return{map$:a.pipe(ft(t=>t)),wayToPave$:b,pushNext:()=>{p.next(1)}}},gt=t=>new Promise(r=>setTimeout(r,1e3*t));(async()=>{const t=document.querySelector("canvas");t.width=402,t.height=402;const{map$:r,wayToPave$:e,pushNext:n}=xt({size:{x:100,y:100}});t.getContext("2d");r.subscribe(m(0,2));let o=1;for(;;)await gt(o),o=Math.max(.01,.9*o),n()})().catch(console.error.bind(console))}]);